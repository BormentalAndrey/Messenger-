name: Android CI - Unpack Termux

on:
  workflow_dispatch:

jobs:
  unpack:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install unzip
        run: sudo apt-get update && sudo apt-get install -y unzip

      - name: Verify archive exists
        run: |
          if [ ! -f termux-library/termux-app-master.zip ]; then
            echo "‚ùå termux-library/termux-app-master.zip not found"
            exit 1
          fi

      - name: Unpack termux-app
        run: |
          mkdir -p termux-library/termux-app tmp
          unzip -q termux-library/termux-app-master.zip -d tmp
          mv tmp/termux-app-master/* termux-library/termux-app/
          rm -rf tmp

      - name: Upload unpacked artifact
        uses: actions/upload-artifact@v4
        with:
          name: termux-app
          path: termux-library/termux-app
